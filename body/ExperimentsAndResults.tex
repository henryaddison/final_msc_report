\chapter{Experiments \& Results}\label{chapter:experiments}
\paragraph{Opening paragraph}
This chapter covers what experiments were run to test the performance of the different types of cox control policies. Schedules were created for these experiments with different numbers of boats and different delays between boat launch. Data were collect for simulation runs of each of theses schedules using different control policies. These data were then analysed from different perspectives to determine the relative strengths and weaknesses of each type of control policy.

\section{Overview of experiments run}
  For each experiment the simulation was run with a variety of
  differing starting parameters. Each experiment then examined a
  different aspect of the boat's behaviour. The sets of simulation
  parameters used for experiments are described next. Then there is a
  brief overview of the experiments carried out.

  \subsection{Simulation Parameters}
  For the experiments, the simulation was setup according to the
  parameters associated with a single row in the
  simulation\_parameters table. These parameters are the control
  policy, the random seed and the launch schedule to use. The launch
  schedule is made of up lists of parameters for each boat to be
  launched. These are the launch tick, desired gear, the speed
  multiplier and the minimum distance to cover for each boat in the
  schedule. These parameters are described in more detail in Section \ref{software:experiment:db}.
  
  The launch schedules were created by specifying a number of boats
  and a fixed delay between each boat launch. Each boat was assigned a
  desired gear between 1 and 10 uniformly at random. The speed
  multiplier was fixed at 0.5 (corresponding to a top speed of 5m/s,
  which matched the fastest time set by crew racing the course on
  April 28th 2012). The distance to cover was fixed at 5000m which is
  roughly equivalent to a outing going to the lock and back (5400m in
  the simulation's version of the Cam). It is important to set this
  quite high so that control policies are not rewarded for spinning on
  launch and immediately landing with going anywhere. There are 16 broadly different types of schedules. There is a one-off schedule where just one boat is launched. There are schedules where the number of boats was either 10, 20 or 30 and the delay between boat launches was 1, 2, 3, 5 or 10 minutes (60, 120, 180, 300, 600 ticks respectively).  For each of these 15 schedule types with more than one boat, 5 different versions were created with a different random assignment of desired gear. This was to ensure experimental results were not determined by any specific selection desired speed (e.g. imagine launching the boats in descending order of desired gear, any reasonable set of policies would likely give the same outcome of boats processing forwards and never coming into contact).
  
  From these schedules sets of simulation parameters were created
  using a fixed random seed with each of the 5 different control
  policies and each of the 76 schedules. 5 random seeds were used to
  create 5 otherwise identical sets of 380 simulation parameters. This
  was to make sure a specific random seed (which affects the boat
  chosen at random to escape first from a crash) did not affect the
  results excessively.

  All simulation runs were restricted to 14400 ticks. This corresponds
  to a 4 hour session. This was to ensure no run took too long. Any
  boats that had not landed when 14400 ticks is reached would be left
  stranded. This may be unfair on boats launched towards the end but
  it should not matter when comparing policies as it is the same for all.
  
  \subsection{Details looked at in each experiment}
  Experiments were run to look at how each control policy performed in
  different areas. These experiments are summarized briefly below. In
  the following sections they are then described in more depth along
  with the data.

  \begin{itemize}
    \item{Single boat}
    The simplest experiment examined the control policy in the case
    that only one boat was launched. This is almost a debugging
    exercise to check that none of the control policies does anything
    odd. However, it is still useful to rule out completely hopeless policies.
  
    \item{Outing completion}
    The different control policies are examined to determine which
    one's are best at enabling coxes to cover their required distance
    and return to the boat house.
    
    \item{Safety}
    The different control policies are examined to determine which is
    safest by looking at the crashes that occur for each policy.

    \item{Following outing plan}
    The different control policies are examined to determine which is
    best at helping a boat stick to the cox's desired gear.
  \end{itemize}

\section{Single boat}
  The single boat experiment is a very simple experiment. It tests the behaviour of the control policy in the simplest of environments - the river without any other boats as obstructions. It is a lower bound for asserting that a policy enables a cox to achieve its ultimate goal of returning the boat to the boathouse after having covered sufficient distance.
    
  \begin{table}[h]
  \centering
  \csvreader[tabular=|l|c|c|c|,
      table head=\hline Control Policy & Tick Landed & Aggregate Gear Difference & Distance Covered\\\hline,
      late after last line=\\\hline]
  {csv/SingleBoatTable.csv}{control_policy=\cp, avg_land_tick=\land, avg_distance_covered=\distance,avg_aggregate_gear_difference=\gear}
  {\cp & \land & \gear & \distance}
  \caption{This table shows the data recorded for a single boat launched at tick 0 with desired gear 2. The results are averaged over 5 runs with different random seeds.}
  \label{experiments:tab:single_boat}
  \end{table}
  \paragraph{values of gear difference}
    
\section{Getting boats back to boat house}
  \paragraph{Table of \% of each time of brain that got back to boat house}
  
  \paragraph{RandomChoice bad, exclude from rest of experiments}
  
  \paragraph{Rough equivalence of remaining brains}
  
  \paragraph{Table for how percentages changed with schedule}
  
  \paragraph{See that the 10 minute delay is to blame - not all boats launched, no chance for later boats to get back to boat house no matter how good their control policy}
  
  \paragraph{Table of overall percentages excluding 10 minute dealy}
  
  \paragraph{Interestingly RandomMovement is best, though BasicBrain and Overtaking brain hardly significant variation. Unsurprisingly Conservative is worst}
  
\section{Crashes}
  \paragraph{graphs of crash no versus delay between boats for varying brains and numbers of boats}
  
  \paragraph{Conservative brain is best, unsurprisingly. Reassuring the overtaking brain is better than basic brain - there is an advantage in looking ahead for obstacles. Random movement unsurprisingly bad - with basic brains, faster boats should gradually filter to the front}

  \paragraph{Speed of crashes, location of crashes}
  
\section{Deviation from desired gear}


\section{Future Work}

\paragraph{Currently too reliant on averages. Study the distribution of values. For example, look at the percentiles other than just 50th}

\paragraph{Investigate other parameters, like crash delay. Investigate other launch patterns.}
